# AI Model Validation Platform API Documentation\n\n## Overview\n\nThe AI Model Validation Platform provides a RESTful API for managing validation projects, uploading test videos, executing tests, and retrieving results.\n\n**Base URL**: `http://localhost:8000`\n\n**API Documentation**: `http://localhost:8000/docs` (Swagger UI)\n\n## Authentication\n\nAll API endpoints require JWT authentication via the `Authorization` header:\n\n```\nAuthorization: Bearer <jwt_token>\n```\n\n### Authentication Endpoints\n\n#### POST /auth/login\nAuthenticate user and get JWT token.\n\n**Request Body**:\n```json\n{\n    \"email\": \"user@example.com\",\n    \"password\": \"password123\"\n}\n```\n\n**Response**:\n```json\n{\n    \"access_token\": \"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9...\",\n    \"token_type\": \"bearer\",\n    \"expires_in\": 1800\n}\n```\n\n#### POST /auth/register\nRegister a new user account.\n\n**Request Body**:\n```json\n{\n    \"email\": \"user@example.com\",\n    \"password\": \"password123\",\n    \"full_name\": \"John Doe\"\n}\n```\n\n## Project Management\n\n### GET /api/projects\nList all projects for the authenticated user.\n\n**Query Parameters**:\n- `skip` (optional): Number of records to skip (default: 0)\n- `limit` (optional): Maximum number of records to return (default: 100)\n\n**Response**:\n```json\n[\n    {\n        \"id\": \"uuid\",\n        \"name\": \"Highway VRU Detection\",\n        \"description\": \"Testing front-facing camera detection\",\n        \"camera_model\": \"Sony IMX390\",\n        \"camera_view\": \"Front-facing VRU\",\n        \"lens_type\": \"Wide angle\",\n        \"resolution\": \"1920x1080\",\n        \"frame_rate\": 30,\n        \"signal_type\": \"GPIO\",\n        \"status\": \"Active\",\n        \"owner_id\": \"uuid\",\n        \"created_at\": \"2024-01-15T10:30:00Z\",\n        \"updated_at\": \"2024-01-15T10:30:00Z\"\n    }\n]\n```\n\n### POST /api/projects\nCreate a new validation project.\n\n**Request Body**:\n```json\n{\n    \"name\": \"Urban Cycling Detection\",\n    \"description\": \"Urban environment cyclist detection validation\",\n    \"camera_model\": \"OmniVision OV2312\",\n    \"camera_view\": \"Front-facing VRU\",\n    \"lens_type\": \"Standard\",\n    \"resolution\": \"1280x720\",\n    \"frame_rate\": 25,\n    \"signal_type\": \"Network Packet\"\n}\n```\n\n### GET /api/projects/{project_id}\nGet details of a specific project.\n\n### PUT /api/projects/{project_id}\nUpdate an existing project.\n\n### DELETE /api/projects/{project_id}\nDelete a project (soft delete).\n\n## Video and Ground Truth Management\n\n### POST /api/projects/{project_id}/videos\nUpload a test video for ground truth generation.\n\n**Request**: Multipart form data with video file\n\n**Response**:\n```json\n{\n    \"video_id\": \"uuid\",\n    \"filename\": \"test_video.mp4\",\n    \"status\": \"uploaded\",\n    \"message\": \"Video uploaded successfully. Ground truth generation started.\"\n}\n```\n\n### GET /api/videos/{video_id}/ground-truth\nGet ground truth data for a processed video.\n\n**Response**:\n```json\n{\n    \"video_id\": \"uuid\",\n    \"objects\": [\n        {\n            \"id\": \"uuid\",\n            \"timestamp\": 12.5,\n            \"class_label\": \"pedestrian\",\n            \"bounding_box\": {\n                \"x\": 100,\n                \"y\": 200,\n                \"width\": 50,\n                \"height\": 120\n            },\n            \"confidence\": 0.92\n        }\n    ],\n    \"total_detections\": 127,\n    \"status\": \"completed\"\n}\n```\n\n## Test Execution\n\n### POST /api/test-sessions\nCreate a new test session.\n\n**Request Body**:\n```json\n{\n    \"name\": \"Highway Test Session 1\",\n    \"project_id\": \"uuid\",\n    \"video_id\": \"uuid\",\n    \"tolerance_ms\": 100\n}\n```\n\n**Response**:\n```json\n{\n    \"id\": \"uuid\",\n    \"name\": \"Highway Test Session 1\",\n    \"project_id\": \"uuid\",\n    \"video_id\": \"uuid\",\n    \"tolerance_ms\": 100,\n    \"status\": \"created\",\n    \"created_at\": \"2024-01-15T14:30:00Z\"\n}\n```\n\n### GET /api/test-sessions\nList test sessions.\n\n**Query Parameters**:\n- `project_id` (optional): Filter by project ID\n- `skip` (optional): Number of records to skip\n- `limit` (optional): Maximum number of records to return\n\n### GET /api/test-sessions/{session_id}\nGet details of a specific test session.\n\n## Detection Events (Raspberry Pi Interface)\n\n### POST /api/detection-events\nSubmit a detection event from the Raspberry Pi.\n\n**Note**: This endpoint does not require authentication as it's called by the Raspberry Pi hardware.\n\n**Request Body**:\n```json\n{\n    \"test_session_id\": \"uuid\",\n    \"timestamp\": 15.2,\n    \"confidence\": 0.87,\n    \"class_label\": \"cyclist\"\n}\n```\n\n**Response**:\n```json\n{\n    \"detection_id\": \"uuid\",\n    \"validation_result\": \"TP\",\n    \"status\": \"processed\"\n}\n```\n\n**Validation Results**:\n- `TP`: True Positive (detection matches ground truth)\n- `FP`: False Positive (detection with no ground truth match)\n- `FN`: False Negative (ground truth with no detection)\n\n## Results and Analytics\n\n### GET /api/test-sessions/{session_id}/results\nGet comprehensive validation results for a test session.\n\n**Response**:\n```json\n{\n    \"test_session_id\": \"uuid\",\n    \"metrics\": {\n        \"true_positives\": 85,\n        \"false_positives\": 12,\n        \"false_negatives\": 8,\n        \"precision\": 0.876,\n        \"recall\": 0.914,\n        \"f1_score\": 0.894,\n        \"accuracy\": 0.914\n    },\n    \"detection_events\": [\n        {\n            \"id\": \"uuid\",\n            \"test_session_id\": \"uuid\",\n            \"timestamp\": 15.2,\n            \"confidence\": 0.87,\n            \"class_label\": \"cyclist\",\n            \"validation_result\": \"TP\",\n            \"ground_truth_match_id\": \"uuid\",\n            \"created_at\": \"2024-01-15T14:35:22Z\"\n        }\n    ],\n    \"total_ground_truth\": 93,\n    \"total_detections\": 97\n}\n```\n\n### GET /api/test-sessions/{session_id}/report\nGenerate and download a PDF report for the test session.\n\n**Response**: PDF file download\n\n## Audit Logging\n\n### GET /api/audit-logs\nRetrieve audit logs (admin only).\n\n**Query Parameters**:\n- `user_id` (optional): Filter by user ID\n- `event_type` (optional): Filter by event type\n- `skip` (optional): Number of records to skip\n- `limit` (optional): Maximum number of records to return\n\n**Response**:\n```json\n[\n    {\n        \"id\": \"uuid\",\n        \"user_id\": \"uuid\",\n        \"event_type\": \"project_create\",\n        \"event_data\": {\n            \"project_id\": \"uuid\",\n            \"project_name\": \"Highway VRU Detection\"\n        },\n        \"ip_address\": \"192.168.1.100\",\n        \"user_agent\": \"Mozilla/5.0...\",\n        \"created_at\": \"2024-01-15T10:30:00Z\"\n    }\n]\n```\n\n## Error Responses\n\nAll endpoints may return the following error responses:\n\n### 400 Bad Request\n```json\n{\n    \"detail\": \"Invalid input data\"\n}\n```\n\n### 401 Unauthorized\n```json\n{\n    \"detail\": \"Not authenticated\"\n}\n```\n\n### 403 Forbidden\n```json\n{\n    \"detail\": \"Not enough permissions\"\n}\n```\n\n### 404 Not Found\n```json\n{\n    \"detail\": \"Resource not found\"\n}\n```\n\n### 422 Validation Error\n```json\n{\n    \"detail\": [\n        {\n            \"loc\": [\"body\", \"email\"],\n            \"msg\": \"field required\",\n            \"type\": \"value_error.missing\"\n        }\n    ]\n}\n```\n\n### 500 Internal Server Error\n```json\n{\n    \"detail\": \"Internal server error\"\n}\n```\n\n## WebSocket Events\n\nThe platform supports WebSocket connections for real-time updates during test execution.\n\n**WebSocket URL**: `ws://localhost:8000/ws`\n\n### Events\n\n#### `detection_event`\nReceived when a new detection event is processed.\n\n```json\n{\n    \"type\": \"detection_event\",\n    \"data\": {\n        \"id\": \"uuid\",\n        \"timestamp\": 15.2,\n        \"validation_result\": \"TP\",\n        \"confidence\": 0.87,\n        \"class_label\": \"cyclist\"\n    }\n}\n```\n\n#### `test_session_update`\nReceived when test session status changes.\n\n```json\n{\n    \"type\": \"test_session_update\",\n    \"data\": {\n        \"session_id\": \"uuid\",\n        \"status\": \"completed\",\n        \"metrics\": {\n            \"precision\": 0.876,\n            \"recall\": 0.914,\n            \"f1_score\": 0.894\n        }\n    }\n}\n```\n\n## Rate Limits\n\n- Authentication endpoints: 5 requests per minute per IP\n- File upload endpoints: 10 requests per hour per user\n- Detection events endpoint: 1000 requests per hour per session\n- Other endpoints: 100 requests per minute per user\n\n## SDK and Integration Examples\n\nFor integration examples and SDKs, see:\n- [Python SDK Example](./examples/python-sdk.py)\n- [Raspberry Pi Client](./raspberry-pi-client.py)\n- [JavaScript/Node.js Example](./examples/nodejs-client.js)