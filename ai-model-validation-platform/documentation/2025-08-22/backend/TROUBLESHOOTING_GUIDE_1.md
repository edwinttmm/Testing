# Troubleshooting Guide\n\nComprehensive troubleshooting guide for the AI Model Validation Platform environment system.\n\n## ðŸš¨ Common Issues & Solutions\n\n### 1. API Connection Issues\n\n#### \"Cannot connect to API\" / \"API connection failed\"\n\n**Symptoms**:\n- Red status in Configuration Validator\n- Error messages about network connectivity\n- API requests timing out\n- \"Failed to fetch\" errors in console\n\n**Root Causes & Solutions**:\n\nðŸ” **Backend Server Not Running**\n```bash\n# Check if backend is running\ncurl http://localhost:8000/health\n# Expected: {\"status\": \"ok\"}\n\n# If not running, start the backend:\ncd backend/\npython main.py\n# or\nuvicorn main:app --host 0.0.0.0 --port 8000\n```\n\nðŸ” **Wrong API URL Configuration**\n```typescript\n// Check current configuration\nimport envConfig from './utils/envConfig';\nconsole.log('API Config:', envConfig.getServiceConfig('api'));\n\n// Expected output:\n// {\n//   url: \"http://localhost:8000\" (development)\n//   url: \"http://155.138.239.131:8000\" (production)\n//   timeout: 30000,\n//   retryAttempts: 5\n// }\n```\n\n**Fix**: Update `.env.development` or `.env.production`:\n```bash\n# For development\nREACT_APP_API_URL=http://localhost:8000\n\n# For production\nREACT_APP_API_URL=http://155.138.239.131:8000\n```\n\nðŸ” **Firewall/Proxy Issues**\n```bash\n# Test direct connectivity\ntelnet localhost 8000\n# or\ntelnet 155.138.239.131 8000\n\n# Check for proxy settings\necho $HTTP_PROXY\necho $HTTPS_PROXY\n```\n\nðŸ” **CORS Issues**\n- Backend must allow frontend origin\n- Check browser console for CORS errors\n- Verify backend CORS configuration\n\n---\n\n### 2. Video Loading Issues\n\n#### \"Video failed to load\" / \"Video URL not accessible\"\n\n**Symptoms**:\n- Videos show loading spinner indefinitely\n- Video player shows error message\n- Console errors about video URLs\n- Black video player with no controls\n\n**Root Causes & Solutions**:\n\nðŸ” **Video File Missing**\n```bash\n# Check if video files exist\nls -la backend/uploads/\n# Should show your video files\n\n# Test direct video access\ncurl -I http://localhost:8000/uploads/your-video-id.mp4\n# Expected: 200 OK with video/mp4 content-type\n```\n\nðŸ” **Video URL Generation Issues**\n```typescript\n// Debug video URL generation\nimport { generateVideoUrl, getFallbackVideoUrl } from './utils/videoUtils';\n\nconst video = {\n  id: 'your-video-id',\n  filename: 'video.mp4'\n};\n\n// Test URL generation\nconst url = generateVideoUrl(video);\nconsole.log('Generated URL:', url);\n\n// Test with fallbacks\ngetFallbackVideoUrl(video).then(url => {\n  console.log('Fallback URL:', url);\n});\n```\n\nðŸ” **Video Format Not Supported**\n```typescript\n// Check format support\nimport { getVideoFormatInfo, isVideoFormatSupported } from './utils/videoUtils';\n\nconst formatInfo = getVideoFormatInfo('video.avi');\nconsole.log('Format Info:', formatInfo);\n// Shows: { extension: 'avi', supported: true, name: 'AVI', ... }\n\nconst supported = isVideoFormatSupported('video.xyz');\nconsole.log('Supported:', supported); // false for unsupported formats\n```\n\n**Fix**: Update supported formats in environment config:\n```bash\nREACT_APP_SUPPORTED_VIDEO_FORMATS=mp4,avi,mov,mkv\n```\n\nðŸ” **Video File Too Large**\n```typescript\n// Check file size limits\nimport { isVideoSizeValid } from './utils/videoUtils';\n\nconst fileSizeBytes = 150 * 1024 * 1024; // 150MB\nconst valid = isVideoSizeValid(fileSizeBytes);\nconsole.log('Size valid:', valid);\n```\n\n**Fix**: Update size limits:\n```bash\n# Development (smaller limit)\nREACT_APP_MAX_VIDEO_SIZE_MB=100\n\n# Production (larger limit)\nREACT_APP_MAX_VIDEO_SIZE_MB=500\n```\n\n---\n\n### 3. WebSocket Connection Issues\n\n#### \"WebSocket connection failed\" / \"Real-time features not working\"\n\n**Symptoms**:\n- No real-time updates\n- WebSocket status shows \"disconnected\"\n- Console errors about WebSocket connections\n- Features requiring real-time data don't work\n\n**Root Causes & Solutions**:\n\nðŸ” **Socket.IO Server Not Running**\n```bash\n# Check if Socket.IO server is running (usually port 8001)\ncurl http://localhost:8001/socket.io/\n# Expected: Socket.IO response\n\n# If not running, start it:\n# (Check your backend setup for Socket.IO server startup)\n```\n\nðŸ” **Wrong WebSocket URL**\n```typescript\n// Check WebSocket configuration\nimport envConfig from './utils/envConfig';\nconsole.log('WebSocket Config:', envConfig.getServiceConfig('websocket'));\n\n// Expected:\n// {\n//   url: \"ws://localhost:8000\" or \"http://localhost:8001\"\n//   timeout: 20000,\n//   retryAttempts: 5\n// }\n```\n\n**Fix**: Update WebSocket URLs:\n```bash\n# For development\nREACT_APP_WS_URL=ws://localhost:8000\nREACT_APP_SOCKETIO_URL=http://localhost:8001\n\n# For production\nREACT_APP_WS_URL=ws://155.138.239.131:8000\nREACT_APP_SOCKETIO_URL=http://155.138.239.131:8001\n```\n\nðŸ” **Firewall Blocking WebSocket**\n- Check corporate firewalls\n- Test from different network\n- Try different ports\n\nðŸ” **Proxy Issues**\n- WebSocket requires HTTP/1.1 Upgrade\n- Some proxies don't support WebSocket\n- Configure proxy to allow WebSocket\n\n---\n\n### 4. Environment Configuration Issues\n\n#### \"Configuration validation failed\" / \"Environment errors\"\n\n**Symptoms**:\n- Red status in Configuration Validator\n- Multiple validation errors\n- Features not working as expected\n- Console errors about configuration\n\n**Root Causes & Solutions**:\n\nðŸ” **Missing Environment Variables**\n```bash\n# Check which variables are set\nenv | grep REACT_APP_\n\n# Required variables:\n# REACT_APP_API_URL\n# REACT_APP_WS_URL\n# REACT_APP_SOCKETIO_URL\n# REACT_APP_VIDEO_BASE_URL\n```\n\nðŸ” **Invalid URL Formats**\n```typescript\n// Test URL validation\nimport envConfig from './utils/envConfig';\n\nconst errors = envConfig.getValidationErrors();\nconsole.log('Validation Errors:', errors);\n\n// Common issues:\n// - Missing protocol (http:// or https://)\n// - Invalid port numbers\n// - Malformed hostnames\n```\n\n**Fix**: Ensure proper URL formats:\n```bash\n# Good URLs\nREACT_APP_API_URL=http://localhost:8000  âœ…\nREACT_APP_API_URL=https://example.com:8000  âœ…\n\n# Bad URLs\nREACT_APP_API_URL=localhost:8000  âŒ (missing protocol)\nREACT_APP_API_URL=http://localhost:999999  âŒ (invalid port)\n```\n\nðŸ” **Wrong Environment File**\n```bash\n# Check which environment files exist\nls -la .env*\n\n# Priority order:\n# 1. .env.local (highest - git ignored)\n# 2. .env.development or .env.production (based on NODE_ENV)\n# 3. .env (lowest - fallback)\n\n# Check current NODE_ENV\necho $NODE_ENV\n# Should be: development, production, or test\n```\n\nðŸ” **Environment File Syntax Errors**\n```bash\n# Common syntax issues:\n# âŒ Spaces around equals: REACT_APP_API_URL = http://localhost:8000\n# âœ… No spaces: REACT_APP_API_URL=http://localhost:8000\n\n# âŒ Missing REACT_APP_ prefix: API_URL=http://localhost:8000\n# âœ… Correct prefix: REACT_APP_API_URL=http://localhost:8000\n\n# âŒ Quotes in wrong places: REACT_APP_API_URL=\"http://localhost:8000\n# âœ… Quotes optional: REACT_APP_API_URL=http://localhost:8000\n```\n\n---\n\n### 5. Build & Deployment Issues\n\n#### \"Build fails\" / \"Environment not detected correctly\"\n\n**Symptoms**:\n- Build process fails\n- Wrong environment detected after build\n- Production features not working\n- Debug features enabled in production\n\n**Root Causes & Solutions**:\n\nðŸ” **NODE_ENV Not Set Correctly**\n```bash\n# For development\nNODE_ENV=development npm start\n\n# For production\nNODE_ENV=production npm run build\n\n# Check current NODE_ENV\necho $NODE_ENV\n```\n\nðŸ” **Environment File Not Loaded**\n```bash\n# Ensure environment files are in correct location\nls -la frontend/.env*\n\n# Files should be:\n# frontend/.env\n# frontend/.env.development\n# frontend/.env.production\n# frontend/.env.local (optional)\n```\n\nðŸ” **Build-time vs Runtime Variables**\n- React environment variables are build-time only\n- They're embedded in the built JavaScript\n- Runtime changes require rebuild\n\n```bash\n# After changing .env.production:\nNODE_ENV=production npm run build\n# Then redeploy the built files\n```\n\n---\n\n## ðŸ› ï¸ Debug Tools & Commands\n\n### Configuration Inspector\n\n```typescript\n// Add to your component or console:\nimport envConfig from './utils/envConfig';\n\n// Get full configuration\nconst config = envConfig.getConfig();\nconsole.log('Full Config:', config);\n\n// Get service-specific config\nconst apiConfig = envConfig.getServiceConfig('api');\nconst wsConfig = envConfig.getServiceConfig('websocket');\nconst videoConfig = envConfig.getServiceConfig('video');\n\nconsole.log('API Config:', apiConfig);\nconsole.log('WebSocket Config:', wsConfig);\nconsole.log('Video Config:', videoConfig);\n\n// Test connectivity\nenvConfig.testApiConnectivity().then(result => {\n  console.log('API Connectivity:', result);\n});\n\n// Check validation\nconsole.log('Config Valid:', envConfig.isValid());\nconsole.log('Validation Errors:', envConfig.getValidationErrors());\n```\n\n### Network Testing Commands\n\n```bash\n# Test API endpoint\ncurl -v http://localhost:8000/health\ncurl -v http://155.138.239.131:8000/health\n\n# Test video endpoint\ncurl -I http://localhost:8000/uploads/test-video.mp4\n\n# Test WebSocket (Socket.IO)\ncurl http://localhost:8001/socket.io/\n\n# Test with timeout\ncurl --connect-timeout 10 http://localhost:8000/health\n\n# Test DNS resolution\nnslookup 155.138.239.131\nping 155.138.239.131\n\n# Test port connectivity\ntelnet localhost 8000\ntelnet 155.138.239.131 8000\n```\n\n### Browser Debug Console\n\n```javascript\n// In browser console:\n\n// 1. Check environment configuration\nconsole.log('Environment:', process.env.NODE_ENV);\nconsole.log('API URL:', process.env.REACT_APP_API_URL);\nconsole.log('All REACT_APP vars:', Object.keys(process.env).filter(k => k.startsWith('REACT_APP_')));\n\n// 2. Test API service\napiService.healthCheck().then(console.log).catch(console.error);\napiService.getConfiguration().then(console.log);\n\n// 3. Test video utilities\nvideoUtils.generateVideoUrl({id: 'test', filename: 'test.mp4'});\nvideoUtils.checkVideoAccessibility('http://localhost:8000/uploads/test.mp4');\n\n// 4. Check WebSocket status\n// (if you have WebSocket hook active)\nconsole.log('WebSocket connected:', wsConnected);\nconsole.log('WebSocket error:', wsError);\n```\n\n### Configuration Validator UI\n\nAdd the Configuration Validator component to see real-time status:\n\n```tsx\nimport ConfigurationValidator from './components/ConfigurationValidator';\n\n// Add to your app (preferably in development mode)\n<ConfigurationValidator \n  showDetails={true}\n  autoRefresh={true}\n  refreshInterval={30000}\n/>\n```\n\n---\n\n## ðŸ“‹ Checklist for Common Scenarios\n\n### âœ… Setting Up Development Environment\n\n- [ ] Backend server running on port 8000\n- [ ] `.env.development` file exists with localhost URLs\n- [ ] `npm start` uses development environment\n- [ ] Configuration Validator shows all green\n- [ ] API health check returns 200 OK\n- [ ] Videos load correctly\n- [ ] Debug logging enabled\n\n### âœ… Deploying to Production (155.138.239.131)\n\n- [ ] `.env.production` file has correct production URLs\n- [ ] `NODE_ENV=production npm run build` completes\n- [ ] Built files served correctly\n- [ ] Backend accessible from production network\n- [ ] Production URLs resolve correctly\n- [ ] Debug features disabled\n- [ ] Performance monitoring enabled\n\n### âœ… Custom Environment Setup\n\n- [ ] `.env.local` created with custom URLs\n- [ ] Custom backend server accessible\n- [ ] Network connectivity verified\n- [ ] Configuration validator passes\n- [ ] All services respond correctly\n\n---\n\n## ðŸ†˜ Emergency Procedures\n\n### If Everything Breaks\n\n1. **Revert to Known Good State**:\n   ```bash\n   # Backup current config\n   cp .env.local .env.local.backup\n   \n   # Use default development config\n   rm .env.local\n   cp .env .env.backup\n   cp .env.development .env\n   \n   # Restart\n   npm start\n   ```\n\n2. **Reset Configuration**:\n   ```bash\n   # Clear all custom config\n   rm .env.local\n   \n   # Regenerate from examples\n   cp .env.local.example .env.local\n   # Edit .env.local with working values\n   ```\n\n3. **Debug Mode**:\n   ```bash\n   # Enable maximum debugging\n   echo \"REACT_APP_DEBUG=true\" >> .env.local\n   echo \"REACT_APP_LOG_LEVEL=debug\" >> .env.local\n   echo \"REACT_APP_ENABLE_DEBUG_PANELS=true\" >> .env.local\n   \n   # Restart and check console\n   npm start\n   ```\n\n### If Backend is Unreachable\n\n1. **Check Backend Status**:\n   ```bash\n   # Is it running?\n   ps aux | grep python\n   ps aux | grep uvicorn\n   \n   # Check ports\n   netstat -tlnp | grep 8000\n   netstat -tlnp | grep 8001\n   ```\n\n2. **Test Alternative URLs**:\n   ```bash\n   # Try different approaches\n   curl http://127.0.0.1:8000/health\n   curl http://0.0.0.0:8000/health\n   curl http://$(hostname -I | cut -d' ' -f1):8000/health\n   ```\n\n3. **Enable Mock Data** (temporary):\n   ```bash\n   echo \"REACT_APP_ENABLE_MOCK_DATA=true\" >> .env.local\n   npm start\n   ```\n\n---\n\n## ðŸ“ž Getting Help\n\nWhen seeking help, please provide:\n\n1. **Environment Information**:\n   ```bash\n   echo \"NODE_ENV: $NODE_ENV\"\n   echo \"Operating System: $(uname -a)\"\n   echo \"Node Version: $(node --version)\"\n   echo \"NPM Version: $(npm --version)\"\n   ```\n\n2. **Configuration Dump**:\n   ```javascript\n   // In browser console:\n   console.log('Environment Variables:', \n     Object.keys(process.env)\n       .filter(k => k.startsWith('REACT_APP_'))\n       .reduce((obj, k) => ({ ...obj, [k]: process.env[k] }), {})\n   );\n   ```\n\n3. **Error Messages**: \n   - Console errors (F12 â†’ Console)\n   - Network tab errors (F12 â†’ Network)\n   - Configuration Validator status\n\n4. **Network Tests**:\n   ```bash\n   curl -v http://your-api-url/health 2>&1\n   ```\n\n5. **Current Configuration**:\n   ```bash\n   cat .env.development  # or .env.production\n   cat .env.local 2>/dev/null || echo \"No .env.local file\"\n   ```\n\n---\n\n**ðŸŽ¯ Remember**: The environment system is designed to be robust and self-healing. Most issues can be resolved by following this guide systematically. Start with the Configuration Validator component for real-time diagnostics.